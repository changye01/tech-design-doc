# 技术设计文档写作指南

## 各章节写作要点

### 背景
- 用 1-2 段说明要解决的问题
- 包含：现状痛点、目标用户、预期收益
- 避免：过早涉及技术细节

**好的例子：**
> 当前用户登录需要每次输入手机号和验证码，日均登录次数 5000+，用户反馈体验繁琐。本次优化目标是支持"记住登录"功能，减少 80% 的重复登录操作。

**不好的例子：**
> 我们要用 JWT + Redis 实现登录优化。（过早涉及技术细节）

### 方案设计
- 先画大图，再细化
- 说明"为什么选这个方案"，不只是"是什么"
- 如有备选方案，简要说明为何不选

**建议包含：**
1. 架构图（使用 Mermaid 语法）
2. 核心流程描述
3. 技术选型表格（组件、选择、理由）

### 接口定义
- API 使用代码块展示
- 包含：请求/响应示例、错误码说明
- 数据结构用表格或 JSON Schema

**API 格式示例：**
```
**接口名称**
- 路径：POST /api/xxx
- 描述：功能描述

请求：{ JSON }
响应：{ JSON }
错误码：列表
```

### 实现计划
- 按里程碑拆分，每个 1-2 周
- 标注依赖关系和风险点
- 明确验收标准

**任务粒度：**
- 太粗：实现用户模块（不清楚具体做什么）
- 合适：实现用户登录 API，包含参数校验和 Token 生成

## 常见问题

**Q: 文档多长合适？**
A: 简单功能 1-2 页，复杂系统 3-5 页。超过 5 页考虑拆分成多个文档。

**Q: 要不要画图？**
A: 架构图必须有，流程图按需。推荐用 Mermaid 语法，便于版本管理。

**Q: 什么时候需要写设计文档？**
A: 新功能开发、重大重构、涉及多人协作时。Bug 修复和小优化通常不需要。

**Q: 文档需要谁评审？**
A: 至少一位相关领域的同事。涉及架构变更需要技术负责人评审。
